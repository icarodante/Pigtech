<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pig Tech - Cadastro</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="header">
      <div class="container_header">
        <h1><a href="index.html">PigTech</a></h1>
        <ul class="navbar">
          <li><a href="index.html">Sobre</a></li>
          <li><a href="calculadora.html">Simule</a></li>
          <li><a href="login.html">Entrar</a></li>
          <li class="agora"><a href="cadastro.html">Cadastrar-se</a></li>
        </ul>
      </div>
    </div>

    <div class="banner">
      <div class="container">
        <div class="card">
          <h2>Cadastre-se</h2>
          <div class="form-box">
            <h4>Nome Completo:</h4>
            <input id="nome_input" type="text" placeholder="Nome" />
            <h4>E-mail:</h4>
            <input id="email_input" type="text" placeholder="E-mail" />
            <h4>Telefone:</h4>
            <input id="telefone_input" type="text" placeholder="Telefone">
            <h4>Celular:</h4>
            <input id="celular_input" type="text" placeholder="Celular">
            <h4>CNPJ:</h4>
            <input id="cnpj_input" type="text" placeholder="CNPJ">
            <h4>Senha:</h4>
            <input id="senha_input" type="password" placeholder="Senha" />
            <h4>Repetir Senha</h4>
            <input id="rptsenha_input" type="password" placeholder="Repetir Senha" />
            <div class="btns">
              <button onclick="validar()" class="btn1">Cadastrar-se</button>
              <a href="login.html">já possui uma conta ?</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="container"><p>Pig Tech SA / cnpj &copy;</p></div>
    </div>
  </body>
</html>
<script>
  function validar() {
    var nomeVar = nome_input.value;
    var email_unformated = email_input.value;
    //var para transoformar email em caixa baixa
    var emailVar = email_unformated.toLowerCase();
    var telefoneVar = telefone_input.value;
    var cnpjVar = cnpj_input.value
    var celularVar = celular_input.value;
    var senhaVar = senha_input.value;
    //var para verificar senha
    var senha_confirm = rptsenha_input.value;

    //precisa adicionar as devidas validações
    if (emailVar.indexOf("@") == -1) {
      alert("Insira um E-mail valido.");
    } else if (emailVar.Length < 10) {
      alert("Insira um E-mail valido.");
    } else if (emailVar.endsWith(".com") == false) {
      alert("Insira um E-mail valido.");
    } else {
      window.location = "login.html";
    }

    fetch("/usuarios/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // Agora vá para o arquivo routes/usuario.js
                nomeServer: nomeVar,
                emailServer: emailVar,
                senhaServer: senhaVar,
                telefoneServer: telefoneVar,
                celularServer: celularVar,
                cnpjServer: cnpjVar
            })
          })
      }
</script>
